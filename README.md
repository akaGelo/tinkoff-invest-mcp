# Tinkoff Invest MCP Server

MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Tinkoff Invest API.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
```bash
uv tool install git+https://github.com/akaGelo/tinkoff-invest-mcp.git
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
git clone git@github.com:akaGelo/tinkoff-invest-mcp.git
cd tinkoff-invest-mcp
uv tool install --editable .
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- **TINKOFF_TOKEN** - API —Ç–æ–∫–µ–Ω –æ—Ç Tinkoff Invest
- **TINKOFF_ACCOUNT_ID** - ID —Å—á–µ—Ç–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- **TINKOFF_MODE** - —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: `sandbox` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ `production`
- **TINKOFF_APP_NAME** - –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞
```env
TINKOFF_TOKEN=your_api_token_here
TINKOFF_ACCOUNT_ID=your_account_id_here
TINKOFF_MODE=sandbox
TINKOFF_APP_NAME=tinkoff-invest-mcp
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP Inspector:
```bash
npx @modelcontextprotocol/inspector
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ MCP –º–µ—Ç–æ–¥—ã

–°–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 18 –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Tinkoff Invest API —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª MCP.

### üí∞ –ü–æ—Ä—Ç—Ñ–µ–ª—å –∏ –±–∞–ª–∞–Ω—Å—ã

#### `get_cash_balance`
–ü–æ–ª—É—á–∏—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å—á–µ—Ç–∞.
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ –∫–∞–∂–¥–æ–π –≤–∞–ª—é—Ç–µ

#### `get_portfolio`
–ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–∞–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è.
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ, —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω–µ –ø–æ–∫—É–ø–∫–∏ –∏ P&L

### üìä –û–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è

#### `get_operations`
–ü–æ–ª—É—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Å—á–µ—Ç—É –∑–∞ –ø–µ—Ä–∏–æ–¥.
- `from_date` - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601
- `to_date` - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `state` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –æ–ø–µ—Ä–∞—Ü–∏–∏:
  - `OPERATION_STATE_EXECUTED` - –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `OPERATION_STATE_CANCELED` - –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `instrument_uid` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É

### üìà –†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### `get_candles`
–ü–æ–ª—É—á–∏—Ç—å —Å–≤–µ—á–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –∑–∞ –ø–µ—Ä–∏–æ–¥.
- `instrument_uid` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `from_date` - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
- `to_date` - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `interval` - –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–≤–µ—á–µ–π:
  - `CANDLE_INTERVAL_1_MIN` - 1 –º–∏–Ω—É—Ç–∞
  - `CANDLE_INTERVAL_5_MIN` - 5 –º–∏–Ω—É—Ç
  - `CANDLE_INTERVAL_15_MIN` - 15 –º–∏–Ω—É—Ç
  - `CANDLE_INTERVAL_HOUR` - 1 —á–∞—Å
  - `CANDLE_INTERVAL_DAY` - 1 –¥–µ–Ω—å

#### `get_last_prices`
–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã –ø–æ —Å–ø–∏—Å–∫—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
- `instrument_uids` - –º–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

#### `get_order_book`
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–∫–∞–Ω –∑–∞—è–≤–æ–∫ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É.
- `instrument_uid` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `depth` - –≥–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

#### `get_trading_schedules`
–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤ –±–∏—Ä–∂–∏.
- `exchange` - –∫–æ–¥ –±–∏—Ä–∂–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "MOEX")
  - `MOEX` - –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –±–∏—Ä–∂–∞
  - `MOEX_PLUS` - MOEX Plus
  - `MOEX_EVENING_WEEKEND` - –í–µ—á–µ—Ä–Ω–∏–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ—Ä–≥–∏ MOEX
  - `SPB` - –°–ü–ë –ë–∏—Ä–∂–∞
- `from_date` - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `to_date` - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `get_trading_status`
–ü–æ–ª—É—á–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
- `instrument_uid` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

### üõí –¢–æ—Ä–≥–æ–≤—ã–µ –∑–∞—è–≤–∫–∏

#### `create_order`
–°–æ–∑–¥–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é –∑–∞—è–≤–∫—É.
- `instrument_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—Ç–æ–≤
- `direction` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
  - `ORDER_DIRECTION_BUY` - –ø–æ–∫—É–ø–∫–∞
  - `ORDER_DIRECTION_SELL` - –ø—Ä–æ–¥–∞–∂–∞
- `order_type` - —Ç–∏–ø –∑–∞—è–≤–∫–∏:
  - `ORDER_TYPE_MARKET` - —Ä—ã–Ω–æ—á–Ω–∞—è –∑–∞—è–≤–∫–∞
  - `ORDER_TYPE_LIMIT` - –ª–∏–º–∏—Ç–Ω–∞—è –∑–∞—è–≤–∫–∞
- `price` - —Ü–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏–º–∏—Ç–Ω—ã—Ö –∑–∞—è–≤–æ–∫, float)

#### `cancel_order`
–û—Ç–º–µ–Ω–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é –∑–∞—è–≤–∫—É.
- `order_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞—è–≤–∫–∏

#### `get_orders`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫.

### üõë –°—Ç–æ–ø-–∑–∞—è–≤–∫–∏

#### `post_stop_order`
–°–æ–∑–¥–∞—Ç—å —Å—Ç–æ–ø-–∑–∞—è–≤–∫—É.
- `instrument_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ—Ç–æ–≤
- `direction` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
  - `STOP_ORDER_DIRECTION_BUY` - –ø–æ–∫—É–ø–∫–∞
  - `STOP_ORDER_DIRECTION_SELL` - –ø—Ä–æ–¥–∞–∂–∞
- `stop_order_type` - —Ç–∏–ø —Å—Ç–æ–ø-–∑–∞—è–≤–∫–∏:
  - `STOP_ORDER_TYPE_TAKE_PROFIT` - —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç
  - `STOP_ORDER_TYPE_STOP_LOSS` - —Å—Ç–æ–ø-–ª–æ—Å—Å
  - `STOP_ORDER_TYPE_STOP_LIMIT` - —Å—Ç–æ–ø-–ª–∏–º–∏—Ç
- `stop_price` - —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (float)
- `expiration_type` - —Ç–∏–ø –∏—Å—Ç–µ—á–µ–Ω–∏—è:
  - `STOP_ORDER_EXPIRATION_TYPE_GOOD_TILL_CANCEL` - –¥–æ –æ—Ç–º–µ–Ω—ã
  - `STOP_ORDER_EXPIRATION_TYPE_GOOD_TILL_DATE` - –¥–æ –¥–∞—Ç—ã
- `price` - —Ü–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (–¥–ª—è STOP_LIMIT, float, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `expire_date` - –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è (–¥–ª—è GOOD_TILL_DATE, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `cancel_stop_order`
–û—Ç–º–µ–Ω–∏—Ç—å —Å—Ç–æ–ø-–∑–∞—è–≤–∫—É.
- `stop_order_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç–æ–ø-–∑–∞—è–≤–∫–∏

#### `get_stop_orders`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç–æ–ø-–∑–∞—è–≤–æ–∫.

### üîç –ü–æ–∏—Å–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

#### `find_instrument`
–ù–∞–π—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ –∑–∞–ø—Ä–æ—Å—É.
- `query` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (—Ç–∏–∫–µ—Ä, ISIN, FIGI –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ)

#### `get_instrument_by_uid`
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ –µ–≥–æ UID.
- `uid` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

#### `get_shares`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π.
- `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

#### `get_bonds`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±–ª–∏–≥–∞—Ü–∏–π.
- `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

#### `get_etfs`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ ETF.
- `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
